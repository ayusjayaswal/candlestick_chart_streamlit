<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lightweight Charts Marker Test</title>
    <script src="https://unpkg.com/lightweight-charts@5.0.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div id="chart" style="width: 600px; height: 400px;"></div>
    <script>
        const chartElement = document.getElementById('chart');
        console.log("LightweightCharts library version:", LightweightCharts.version());

        const chart = LightweightCharts.createChart(chartElement, { width: 600, height: 400 });
        console.log("Chart object:", chart);

        const candlestickSeries = chart.addSeries(LightweightCharts.CandlestickSeries, {});
        console.log("CandlestickSeries object:", candlestickSeries);
        console.log("typeof candlestickSeries.setMarkers:", typeof candlestickSeries.setMarkers);

        const areaSeries = chart.addSeries(LightweightCharts.AreaSeries, {});
        console.log("AreaSeries object:", areaSeries);
        console.log("typeof areaSeries.setMarkers:", typeof areaSeries.setMarkers);

        // Sample candle data
        const candleData = [
            { time: '2018-12-22', open: 75.16, high: 82.84, low: 36.16, close: 45.72 },
            { time: '2018-12-23', open: 45.12, high: 53.90, low: 45.12, close: 48.09 },
            { time: '2018-12-24', open: 48.09, high: 50.00, low: 47.50, close: 49.20 },
        ];
        candlestickSeries.setData(candleData);

        // Sample marker data
        const markerTestData = [
            { time: '2018-12-22', position: 'aboveBar', color: 'red', shape: 'arrowDown', text: 'TestCS' }
        ];

        if (typeof candlestickSeries.setMarkers === 'function') {
            candlestickSeries.setMarkers(markerTestData);
            console.log("Markers set on CandlestickSeries.");
        } else {
            console.error("candlestickSeries.setMarkers is NOT a function.");
        }
    </script>
</body>
</html>
